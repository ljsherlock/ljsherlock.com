"use strict";define("utils/util",[],function(){window,document,document.documentElement,document.getElementsByTagName("body")[0],window.innerWidth,window.innerHeight;return{isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},makeArray:function(e){return null!=e.length?Array.prototype.slice.call(e,0).filter(function(e){return void 0!==e}):[]},set_cookie:function(e,t){var n=new Date;n.setTime(n.getTime()+864e6);var o=n.toUTCString();document.cookie=e+"="+encodeURI(t)+"; expires="+o+"; path=/"},hasCookie:function(e){if(this.getCookie(e))return!0},getCookie:function(e){if(this.hasCookie(e)){var t="; "+document.cookie,n=t.split("; "+e+"=");if(2==n.length)return n.pop().split(";").shift()}return!1},delete_cookie:function(e){return this.hasCookie(e)&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"),!1},supportSVG:function(){return!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)},generate_id:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split(""),n="";e||(e=Math.floor(Math.random()*t.length));for(var o=0;o<e;o++)n+=t[Math.floor(Math.random()*t.length)];return n},fitToWindow:function(e){var t=this.d.querySelector(e),n=this.w.innerHeight;t&&(t.style.height=n+"px")},fullscreen:function(e){this.fitToWindow(e),window.onresize=function(){this.fitToWindow(e)}},dekstop_nav__hide:function(){function e(){var e=$(window).scrollTop();Math.abs(n-e)<=o||(0==e?($("header").removeClass("header--hide-it"),$("header").removeClass("header--fixed"),$("header").find(".nav__menu").addClass("flex-row__flex-col--center").removeClass("flex-row__flex-col--centered")):e>n&&e>0?($("header").addClass("header--hide-it").removeClass("header--fixed"),$("header").find(".nav__menu").addClass("flex-row__flex-col--centered").removeClass("flex-row__flex-col--center")):e+$(window).height()<r?$("header").removeClass("header--hide-it"):($("header").removeClass("header--hide-it"),$("header").addClass("header--fixed")),n=e)}var t,n=0,o=5,r=$("header nav#mainMenu").outerHeight();$(window).scroll(function(e){t=!0}),setInterval(function(){t&&(e(),t=!1)},250)},loadScript:function(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){t()},n.onerror=function(){t(new Error("Failed to load script "+e))},document.head.appendChild(n)},param:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length>0&&(t+="&"),t+=encodeURI(n+"="+e[n]));return t},perf:function(){var e=function(e){window.onload=function(){window.performance=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{};var t,n=window.performance.timing,o=(new Date).getTime();if(n){e=e||1e3;var r=n.navigationStart,i=document.createElement("div");i.setAttribute("id","results"),t=o-r,i.innerHTML=o-r+"ms",i.className+=t>e?" overBudget":" underBudget",document.body.appendChild(i)}}};window.perfBar=e},debouncer:function(e,t,n){var o;return function(){var r=this,i=arguments,a=function(){o=null,n||e.apply(r,i)},c=n&&!o;clearTimeout(o),o=setTimeout(a,t),c&&e.apply(r,i)}},getScrollXY:function(){var e=0,t=0;return"number"==typeof window.pageYOffset?(t=window.pageYOffset,e=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(t=document.body.scrollTop,e=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft),[e,t]},getDocHeight:function(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)},affixFileName:function(e,t){return e.substring(0,e.lastIndexOf("."))+t+e.substring(e.lastIndexOf("."))}}}),define("/Users/admin/www/f3architects.co.uk/site/web/app/themes/f3-architects-theme/js/utils/Ajax.js",["utils/util"],function(e){var t={put:function(e,t,n,o){var r=new XMLHttpRequest,i=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");if(r.open("PUT",e+"?"+i),r.setRequestHeader("Content-Type","application/json"),""!=t){var a=JSON.stringify(t);r.send(a)}return r.onload=function(){if(200===r.status){if("function"!=typeof n)return r.responseText;n(r.responseText)}else 200!==r.status&&("function"==typeof o?o():alert("Request failed.  Returned status of "+r.status))},r},internalLinkBefore:function(){return!1},internalLinks:function(){var e=(document.querySelector("main"),top.location.host.toString());links=document.querySelectorAll("a"),[].forEach.call(links,function(n){var o=n.getAttribute("href");null!==o&&o.match(e)&&!o.match("mailto:")&&(n.classList.contains("internal_link")||(n.classList.add("internal_link"),n.addEventListener("click",function(e){e.preventDefault();var o=n.getAttribute("href");o!=window.location&&0!=t.getPage(o)&&history.pushState(null,null,o),e.stopPropagation()})))})},getPageCallback:function(){},getPage:function(e){t.internalLinkBefore();var n=JSON.stringify({ajax:!0}),o=new XMLHttpRequest;o.open("POST",e),o.setRequestHeader("Content-Type","application/json"),o.send(n),o.onload=function(){if(200===o.status){var e=o.responseText;document.title=e.match(/<h1[^>]*>([^<]+)<\/h1>/)[1]+"â€”"+location.host,t.getPageCallback(e)}else if(200!==o.status)return!1}},links:function(e,t,n){var o=document.querySelector(e),r="http://"+top.location.host.toString(),i=document.querySelectorAll("a[href^='"+r+"']");i.classList.add("internal_links"),[].forEach.call(i,function(e){e.classList.add("internal_link"),e.addEventListener("click",function(r){r.preventDefault(),t();var i=e.getAttribute("href"),a=JSON.stringify({ajax:!0}),c=new XMLHttpRequest;c.open("PUT",i),c.setRequestHeader("Content-Type","application/json"),c.send(a),c.onload=function(){if(200===c.status){var e=c.responseText;o.innerHTML=e,n()}else 200!==c.status&&alert("Request failed.  Returned status of "+c.status)}})})},search_keydown_ajax:function(){var e=document.querySelector("#search__form"),n=document.querySelector("#search--site");Events.preventForm(document.querySelector("#search__form")),e.querySelector(".search__field").addEventListener("keydown",function(e){var o=e.target,r=o.value;o.setAttribute("autocomplete","off"),r.length>2&&t.put(ajax_url+"?action=fps_search_ajax",{action:"fps_search_ajax",term:r},function(){xhr.responseText,n.querySelector("#search__results"),n.querySelector("#search__results--portable")})})}};return t});